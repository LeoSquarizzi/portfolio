--- 
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import ProjectCard from '../components/ProjectCard.astro';
import ServiceCard from '../components/ServiceCard.astro';
import GameCard from '../components/GameCard.astro';
import Button from '../components/Button.astro';
import { getFeaturedProjects } from '../data/projects';

//Ref: https://proyecto26.com/

// Fetch featured projects with GitHub stats at build time
const projects = await getFeaturedProjects(6);

const services = [
  {
    title: 'Mobile Development',
    icon: 'smartphone',
    color: 'coral' as const,
    technologies: ['React Native', 'NativeScript', 'Ionic'],
  },
  {
    title: 'Web Components',
    icon: 'globe',
    color: 'teal' as const,
    technologies: ['Stencil', 'Web Animations API', 'TypeScript'],
  },
  {
    title: 'Game Development',
    icon: 'gamepad-2',
    color: 'orange' as const,
    technologies: ['Phaser', 'Unity', 'C#'],
  },
];

const games = [
  {
    title: 'Tindin Metaverse',
    subtitle: "Game Designer / Level Designer",
    highlights: [
      "Designed core systems and progression balance",
      "Quest and reward design",
      "City layout and district level design",
      "Fast travel and navigation mechanics",
      "UI feedback and onboarding flows"
    ],
    tags: ['2D Multiplayer', 'Simulator', 'Phaser', 'Mobile', 'PC'],
    href: '/games/tindinmetaverse',
    image: '/img/projects/tindin.png',
    hoverImage: '/img/projects/tindingif.gif',
    featured: true,
  },
{
    title: 'Investors Game', 
    subtitle: "Lead Game Designer / Level Designer",
    highlights: [
      "Gameplay and economy design",
      "Quest and item system design",
      "Level design and city interaction flow",
      "Implementation via Blockly logic"
    ],
    tags: ['2D Multiplayer', 'Manager', 'Mobile', 'PC'],
    href: '/games/investorsgame',
    image: '/img/projects/invest.png',
    hoverImage: '/img/projects/invest.gif',
  },
  {
    title: 'Literama',
    subtitle: "Lead Game Designer",  
    highlights: [
      "Lead game design and team coordination",
      "Level design and quest sequence",
      "Gameflow adaptation and UX guidance"
    ],
    tags: ['2D Multiplayer', 'Adventure', 'Mobile', 'PC'],
    href: '/games/literama',
    image: '/img/projects/literama.jpg',
    hoverImage: '/img/projects/literamagif.gif',
  },
  {
    title: 'Save the Boat', 
    subtitle: "Solo Developer",   
    highlights: [
      "Solo game design and development",
      "Gameplay systems and enemy AI",
      "Boss fight mechanics design"
    ],    
    tags: ['2D', 'Arcade', 'Unity', 'Mobile'],
    href: '/games/savetheboat',
    image: '/img/projects/boat.png',
    hoverImage: '/img/projects/boatgif.gif',
  },
];

/* 
  {
    title: 'Orbit Ball',  
    subtitle: "Solo Developer",
    highlights: [
      "Casual game design case study",
      "One-handed and accessible gameplay",
      "Challenge and difficulty tuning"
    ],
    tags: ['2D', 'Casual', 'Unity', 'Mobile'],
    href: '/games/tindin',
    image: '/img/projects/orbitball.jpg',
  },
  {
    title: 'Rivals Showdown',
    subtitle: "Game Developer",  
    highlights: [
      "Core game design and mechanics",
      "AI behavior and decision systems",
      "Player formations and route logic"
    ],    
    tags: ['3D', 'Sports', 'Unity', 'Mobile'],
    href: '/games/tindin',
    image: '/img/projects/gameday.png',
  },
  {
    title: 'Everything Ends in Pizza',
    subtitle: "Game Developer",
    highlights: [
      "Minigame mechanics design and balance",
      "Gameplay programming in Unity",
      "Asset management and documentation"
    ],
    tags: ['2D', 'Runner', 'Unity', 'Mobile'],
    href: '/games/tindin',
    image: '/img/projects/pizza.png',
  },*/

const bulletskills = [
  { category: 'Game Design & Development', items: ['Game design systems', 'Core mechanics', 'Level design', 'Gameplay balancing', 'Game progression'] },
  { category: 'Game Engines & Programming', items: ['Unity', 'Construct', 'C#', 'SQL', 'Python'] },
  { category: 'Workflow & Methodologies', items: ['Agile', 'Scrum', 'Kanban', 'Figma/Miro', 'Google Workspace'] },
];

const supportLinks = [
  { name: 'Patreon', icon: 'heart', color: '#FF424D', href: 'https://patreon.com/proyecto26' },
  { name: 'Ko-fi', icon: 'coffee', color: '#f2385a', href: 'https://ko-fi.com/proyecto26' },
  { name: 'Open Collective', icon: 'users', color: '#7FADF2', href: 'https://opencollective.com/proyecto26' },
  { name: 'Liberapay', icon: 'dollar-sign', color: '#f6c915', href: 'https://liberapay.com/proyecto26' },
];
---

<BaseLayout title="Proyecto 26 - Changing the world with small contributions">
  <Header currentPage="home" />

  <main>
    <!-- Hero Section -->
    <Hero />

        <!-- Games Section -->
    <section id="projects" class="section bg-bg-primary">
      <div class="container">
        <div class="text-center mb-16">
          <h2 class="text-4xl md:text-5xl font-bold text-text-primary mb-4" data-animate="fade-up">
            Selected Projects
          </h2>
          <p class="text-lg text-text-secondary" data-animate="fade-up" data-delay="100">
            View full project list
          </p>
        </div>

        <!-- Featured Game -->
        <div class="mb-12" data-animate="fade-up" data-delay="200">
          <p class="text-xs font-semibold text-accent-coral uppercase tracking-widest mb-4">Featured Project</p>
          <GameCard {...games[0]} />
        </div>

        <!-- More Games -->
        <div class="mb-4">
          <p class="text-xs font-semibold text-text-muted uppercase tracking-widest mb-4">Other Projects</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {games.slice(1).map((game, index) => (
            <div data-animate="fade-up" data-delay={150 + index * 100}>
              <GameCard {...game} />
            </div>
          ))}
        </div>
        <!-- See All Projects CTA -->
        <div class="flex justify-center mt-8" data-animate="fade-up">
          <Button href="/games" variant="secondary" size="lg">
            See All Projects
          </Button>
        </div>      
      </div>
    </section>

    <!-- Skills Section -->
    <section class="pt-2 pb-16 bg-bg-primary">
      <div class="container">
        <h2 class="text-3xl md:text-4xl font-bold text-text-primary text-center mb-12" data-animate="fade-up">
            Core Expertise
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
          {bulletskills.map((skill, index) => (
            <div
              class="bg-bg-card border border-border-default rounded-2xl p-6"
              data-animate="fade-up"
              data-delay={index * 100}
            >
              <h3 class="text-lg font-semibold text-accent-coral mb-4">{skill.category}</h3>
              <ul class="space-y-2">
                {skill.items.map((item) => (
                  <li class="text-text-secondary text-sm flex items-center gap-2">
                    <i data-lucide="check" class="w-4 h-4 text-accent-teal"></i>
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>

<script>
  // Initialize animations when GSAP is loaded
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Fade up animation for elements with data-animate="fade-up"
  document.querySelectorAll('[data-animate="fade-up"]').forEach((el) => {
    const delay = parseInt(el.getAttribute('data-delay') || '0') / 1000;

    gsap.from(el, {
      scrollTrigger: {
        trigger: el,
        start: 'top 85%',
        toggleActions: 'play none none none',
      },
      y: 30,
      opacity: 0,
      duration: 0.6,
      delay,
      ease: 'power2.out',
    });
  });

</script>
